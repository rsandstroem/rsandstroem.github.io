<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Create Azure HDInsight clusters using templates</title>
        <link rel="stylesheet" href="https://rsandstroem.github.io/theme/css/main.css" />
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-5699621187774656",
                enable_page_level_ads: true
            });
        </script>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({
                google_ad_client: "ca-pub-5699621187774656",
                enable_page_level_ads: true
            });
        </script>
        <link rel='stylesheet' href='https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.css' type="text/css">
        <script src="https://cdn.pydata.org/bokeh/release/bokeh-0.12.6.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            Bokeh.set_log_level("info");
        </script>
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
                <meta property="og:title" content="Create Azure HDInsight clusters using templates" />
                <meta property="og:type" content="article" />
                <meta property="og:url" content="https://rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" />
                <meta property="og:description" content="Microsoft Azure provides big data infrastructure through the HDInsight product. However, they bill you per hour, no matter if you use the computing resources or not. One option is to destroy clusters when they are not needed, but to get the clusters back up with minimum effort it is best to use predefined scripts or templates. This post shows you a few alternatives how to accomplish this." />
                <meta property="og:locale" content="" />
                <meta property="og:site_name" content="Data Scientist Blog" />
                <meta property="article:published_time" content="2016-09-01" />
                <meta property="article:section" content="posts" />
                <meta property="article:tag" content="azure" />
                <meta property="article:tag" content="cloud" />
                <meta property="article:tag" content="architecture" />
                <meta property="article:tag" content="tutorial" />
                <meta property="article:tag" content="big data" />
 

</head>

<body id="index" class="home">
<a href="https://github.com/rsandstroem/">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="https://rsandstroem.github.io/">Data Scientist Blog </a></h1>
                <nav><ul>
    
                        <li><a href="https://rsandstroem.github.io/pages/about.html">about</a></li>
                    <li class="active"><a href="https://rsandstroem.github.io/category/posts.html">posts</a></li>
                </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" rel="bookmark"
           title="Permalink to Create Azure HDInsight clusters using templates">Create Azure HDInsight clusters using templates</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>Don 01 September 2016</span>
<span>| tags: <a href="https://rsandstroem.github.io/tag/azure.html">azure</a><a href="https://rsandstroem.github.io/tag/cloud.html">cloud</a><a href="https://rsandstroem.github.io/tag/architecture.html">architecture</a><a href="https://rsandstroem.github.io/tag/tutorial.html">tutorial</a><a href="https://rsandstroem.github.io/tag/big-data.html">big data</a></span>
</footer><!-- /.post-info -->      
<section id="content" class="body">
  <article>
     <p>Microsoft Azure provides big data infrastructure through the HDInsight product. However, they bill you per hour no matter if you use the computing resources or not. One option is to destroy clusters when they are not needed, but to get the clusters back up with minimum effort it is best to use predefined scripts or templates. This post shows you a few alternatives how to accomplish this.</p>
<h2>Accessing templates from the Azure portal</h2>
<p>Your templates are collected in one central location on the Azure portal, conveniently named "Templates". To find it click on "More Services &gt;" in the bottom left, and select it. I recommend saving this blade as a favourite to always have it visible in the left pane.
<img alt="drawing" width="98%" src="/images/azureportal_template1.png" />
This will show you a list of saved templates which you can edit and deploy. It is likely an empty list if you did not yet create any template, so let's get straight to creating one.</p>
<h2>Save existing cluster as a template</h2>
<p>It is possible to export the configuration of an running cluster as a template. From the <a href="https://portal.azure.com">Azure portal</a>, go to the HDInsight cluster blade. The menu item "Automation script" shows you the configuration of the current HDInsight cluster.
<img alt="drawing" width="98%" src="/images/azureportal_export_template.png" />
Click on "Add to library" to save this template to your collection of templates in the Azure portal.</p>
<p><em>By the time I am writing this post, this export feature does not work well, as is evident from the orange warning message. The cluster I created from these auto generated templates were not achieving the desired result. I had better success with the following method:</em></p>
<h2>Use Azure quickstart templates</h2>
<p>There is a maintained repository of pre-configured templates at <a href="https://github.com/Azure/azure-quickstart-templates">github</a>. It contains many useful templates to use or look at for inspiration.</p>
<p><em>It should be possible to use the links that Microsoft provides on the github pages to deploy a new cluster with a single click. In practice I always had issues with this process so I prefer to (1) copy the content of an quickstart template into the Template blade of Azure portal and (2) save it as a new template.</em></p>
<p>Select a template that fits your purpose and adapt it by adding in some default values. It will decrease the manual labour of recreating the cluster and also reduce the risk of providing the wrong parameter values, e.g., the cluster name.</p>
<h2>Deploy template</h2>
<p>Once the template is properly configured, hit the "Deploy" button. If you filled out the configuration with sensible default, you just need to type in the passwords, accept the conditions and click "Create" to deploy the cluster.
<img alt="drawing" width="98%" src="/images/azureportal_template0.png" />
It will take about 20 minutes to start all services, depending on your configuration.</p>
<p>If one service fails, you can edit the template and repeat the steps above. It will not touch services which were marked as successful in the previous deployment.</p>
<h2>Next steps</h2>
<p>It is possible to script post-deployment actions in the template, saving you the trouble of manual installation of applications such as R-Studio. This will be shown in another blog post.</p>
    </div><!-- /.entry-content -->

  </article>
</section>

    </div><!-- /.entry-content -->

      <section>
        <p id="post-share-links">
          Share on:
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A//rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html&title=Create%20Azure%20HDInsight%20clusters%20using%20templates&summary=Microsoft%20Azure%20provides%20big%20data%20infrastructure%20through%20the%20HDInsight%20product.%20However%2C%20they%20bill%20you%20per%20hour%2C%20no%20matter%20if%20you%20use%20the%20computing%20resources%20or%20not.%20One%20option%20is%20to%20destroy%20clusters%20when%20they%20are%20not%20needed%2C%20but%20to%20get%20the%20clusters%20back%20up%20with%20minimum%20effort%20it%20is%20best%20to%20use%20predefined%20scripts%20or%20templates.%20This%20post%20shows%20you%20a%20few%20alternatives%20how%20to%20accomplish%20this.&source=https%3A//rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" target="_blank" title="Share on LinkedIn">LinkedIn</a>
          ❄
          <a href="http://twitter.com/home?status=Create%20Azure%20HDInsight%20clusters%20using%20templates%20https%3A//rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" target="_blank" title="Share on Twitter">Twitter</a>
          ❄
          <a href="http://www.facebook.com/sharer/sharer.php?u=https%3A//rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" target="_blank" title="Share on Facebook">Facebook</a>
          ❄
          <a href="https://plus.google.com/share?url=https%3A//rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" target="_blank" title="Share on Google Plus">Google+</a>
          ❄
          <a href="mailto:?subject=Create%20Azure%20HDInsight%20clusters%20using%20templates&amp;body=https%3A//rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html" target="_blank" title="Share via Email">Email</a>
        </p>
      </section>
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "create-azure-hdinsight-clusters-using-templates.html";
        var disqus_url = "https://rsandstroem.github.io/create-azure-hdinsight-clusters-using-templates.html";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//data-scientist-blog.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://ch.linkedin.com/in/rikard-sandström-a0b3229">LinkedIn</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-83199770-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'data-scientist-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>